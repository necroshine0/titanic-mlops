name: MLflow Health Check

on: [push, pull_request]

jobs:
  healthcheck-mlflow:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Health Check - MLflow
      run: |
        echo "Checking MLflow service at ${{ secrets.MLFLOW_TRACKING_URI }}"
        response_code=$(curl -s -o /dev/null -w "%{http_code}" "${{ secrets.MLFLOW_TRACKING_URI }}" || echo "000")
        if [ "$response_code" -eq 200 ]; then
          echo "✅ MLflow service is healthy (HTTP $response_code)"
        else
          echo "❌ MLflow service is not responding (HTTP $response_code)"
          exit 1
        fi
